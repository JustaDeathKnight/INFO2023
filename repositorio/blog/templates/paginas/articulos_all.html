{% extends 'base.html' %} 
{%load static %} 
{% block titulo %}Articulos{% endblock titulo %} 

{% block contenido %}
<h2 class="titulos-subtitulos">TODOS LOS ARTICULOS</h2>

<div class="container">
  <!-- Filtros con collapse de Bootstrap -->
  <div class="row">
    <div class="dropdown col-6">
      <button
        class=" btn btn-secondary parrafos"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        Filtros de artículos <i class="bi bi-chevron-down"></i>
      </button>

      <div class="dropdown-menu filtro-drop">
        <div class="container m-2 ">
          
          <form method="get" class="form-inline mb-3 me-3">
            <div class=" form-group mr-3 mt-1">
              <label for="categoria">Filtrar por categoría:</label>
              <select
                name="categoria"
                id="categoria"
                class="form-control mt-2"
              >
                <option value="">Todas las categorías</option>
                {% for categoria in categorias %}
                <option value="{{ categoria.id }}">
                  {{ categoria.nombre }}
                </option>
                {% endfor %}
              </select>
            </div>
            <div class="form-group mr-3 mt-1">
              <label for="orden">Ordenar por:</label>
              <select name="orden" id="orden" class="form-control mt-2">
                <option value="titulo">Título</option>
                <option value="fecha_publicacion">
                  Fecha de publicación
                </option>
              </select>
            </div>
            <div class="form-group mr-3 mt-1">
              <label for="direccion">Orden:</label>
              <select
                name="direccion"
                id="direccion"
                class="form-control mt-2"
              >
                <option value="asc">Ascendente</option>
                <option value="desc">Descendente</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary mt-3">
              Filtrar
            </button>
          </form>
        </div>
      </div>
    </div>
    <!-- Boton para ir a todas las categorias -->
    <div class="col-6 d-flex justify-content-end">
      <a href="{% url 'categorias' %}" class="btn btn-primary me-0">
        Ver Todas las Categorías
      </a>
    </div>
  </div>

  <!-- Fin del collapse de filtros -->

  <div class="row mt-4">
    <!-- Bloque de artículos -->
    <div class="col-md-9 ">
      {% for articulo in articulos %}
      <div class="card mb-3 fondo-semi-transparente">
        <div class="row g-0">
          <div class="col-md-4">
            <img
              src="{{ articulo.imagen.url }}"
              class="rounded-square-image"
              alt="{{ articulo.titulo }}"
            />
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title">{{ articulo.titulo }}</h5>
              <p class="card-text">{{ articulo.resumen }}</p>
              <a
                href="{% url 'detalle_articulo' articulo.id %}"
                class="btn btn-primary"
                >Leer más</a
              >
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    
  </div>
</div>

{% endblock contenido %}
<script src="{% static 'js/filtro.js' %}"></script>
